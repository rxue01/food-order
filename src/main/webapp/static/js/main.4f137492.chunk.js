(this["webpackJsonpdoordash-app"]=this["webpackJsonpdoordash-app"]||[]).push([[0],{144:function(t,e,n){},145:function(t,e,n){},223:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(24),i=n.n(r),s=(n(144),n(32)),o=n(230),u=n(228),l=(n(145),n(122)),j=n(136),d=n(130),h=n(132),b=n(226),f=n(229),O=n(131),m=n(232),p=n(233),g=function(t){var e="/login?username=".concat(t.username,"&password=").concat(t.password);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to log in")}))},x=n(10),y=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={loading:!1},t.onFinish=function(e){t.setState({loading:!0}),g(e).then((function(){h.b.success("Login Successful"),t.props.onSuccess()})).catch((function(t){h.b.error(t.message)})).finally((function(){t.setState({loading:!1})}))},t.render=function(){return Object(x.jsxs)(b.a,{name:"normal_login",onFinish:t.onFinish,style:{width:300,margin:"auto"},children:[Object(x.jsx)(b.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(x.jsx)(f.a,{prefix:Object(x.jsx)(m.a,{}),placeholder:"Username"})}),Object(x.jsx)(b.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(x.jsx)(f.a.Password,{prefix:Object(x.jsx)(p.a,{}),placeholder:"Password"})}),Object(x.jsx)(b.a.Item,{children:Object(x.jsx)(O.a,{type:"primary",htmlType:"submit",loading:t.state.loading,children:"Login"})})]})},t}return n}(a.a.Component),v=y,S=n(71),w=n(65),C=n(227),F=n(225),I=n(138),k=S.a.Option;function P(t){var e=t.itemId,n=Object(c.useState)(!1),a=Object(s.a)(n,2),r=a[0],i=a[1];return Object(x.jsx)(w.a,{title:"Add to shopping cart",children:Object(x.jsx)(O.a,{loading:r,type:"primary",icon:Object(x.jsx)(I.a,{}),onClick:function(){i(!0),function(t){return fetch("/order/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(e).then((function(){return h.b.success("Successfully add item")})).catch((function(t){return h.b.error(t.message)})).finally((function(){i(!1)}))}})})}var T=function(t){var e=Object(c.useState)(),n=Object(s.a)(e,2),a=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1],j=Object(c.useState)([]),d=Object(s.a)(j,2),b=d[0],f=d[1],O=Object(c.useState)(!1),m=Object(s.a)(O,2),p=m[0],g=m[1],y=Object(c.useState)([]),v=Object(s.a)(y,2),w=v[0],I=v[1];return Object(c.useEffect)((function(){l(!0),fetch("/restaurants").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get restaurants");return t.json()})).then((function(t){f(t)})).catch((function(t){h.b.error(t.message)})).finally((function(){l(!1)}))}),[]),Object(c.useEffect)((function(){var t;a&&(g(!0),(t=a,fetch("/restaurant/".concat(t,"/menu")).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get menus");return t.json()}))).then((function(t){I(t)})).catch((function(t){h.b.error(t.message)})).finally((function(){g(!1)})))}),[a]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(S.a,{value:a,loading:u,style:{width:300},placeholder:"Select a restaurant",onChange:function(){},onSelect:function(t){return r(t)},children:b.map((function(t){return Object(x.jsx)(k,{value:t.id,children:t.name},t.id)}))}),a&&Object(x.jsx)(C.b,{style:{marginTop:20},loading:p,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:w,renderItem:function(t){return Object(x.jsx)(C.b.Item,{children:Object(x.jsxs)(F.a,{title:t.name,extra:Object(x.jsx)(P,{itemId:t.id}),children:[Object(x.jsx)("img",{src:t.imageUrl,alt:t.name,style:{height:"auto",width:"100%",display:"block"}}),"Price: ",t.price]})})}})]})},E=n(231),L=u.a.Text,B=function(){var t=Object(c.useState)(!1),e=Object(s.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)(),i=Object(s.a)(r,2),o=i[0],u=i[1],l=Object(c.useState)(!1),j=Object(s.a)(l,2),d=j[0],b=j[1],f=Object(c.useState)(!1),m=Object(s.a)(f,2),p=m[0],g=m[1];Object(c.useEffect)((function(){n&&(b(!0),fetch("/cart").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get shopping cart data");return t.json()})).then((function(t){u(t)})).catch((function(t){h.b.error(t.message)})).finally((function(){b(!1)})))}),[n]);var y=function(){a(!1)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.a,{type:"primary",shape:"round",onClick:function(){a(!0)},children:"Cart"}),Object(x.jsx)(E.a,{title:"My Shopping Cart",onClose:y,visible:n,width:520,footer:Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(L,{strong:!0,children:"Total price: $".concat(null===o||void 0===o?void 0:o.totalPrice)}),Object(x.jsxs)("div",{children:[Object(x.jsx)(O.a,{onClick:y,style:{marginRight:8},children:"Cancel"}),Object(x.jsx)(O.a,{onClick:function(){g(!0),fetch("/checkout").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to checkout")})).then((function(){h.b.success("Successfully checkout"),a(!1)})).catch((function(t){h.b.error(t.message)})).finally((function(){g(!1)}))},type:"primary",loading:p,disabled:d||0===(null===o||void 0===o?void 0:o.orderItemList.length),children:"Checkout"})]})]}),children:Object(x.jsx)(C.b,{loading:d,itemLayout:"horizontal",dataSource:null===o||void 0===o?void 0:o.orderItemList,renderItem:function(t){return Object(x.jsx)(C.b.Item,{children:Object(x.jsx)(C.b.Item.Meta,{title:t.menuItem.name,description:"$".concat(t.price)})})}})})]})},H=o.a.Header,M=o.a.Content,U=u.a.Title;var q=function(){var t=Object(c.useState)(!1),e=Object(s.a)(t,2),n=e[0],a=e[1];return Object(x.jsxs)(o.a,{style:{height:"100vh"},children:[Object(x.jsxs)(H,{children:[" ",Object(x.jsxs)("div",{className:"header",style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(U,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Lai Food"}),n&&Object(x.jsx)("div",{children:Object(x.jsx)(B,{})})]})]}),Object(x.jsx)(M,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflow:"auto"},children:n?Object(x.jsx)(T,{}):Object(x.jsx)(v,{onSuccess:function(){return a(!0)}})})]})},A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,234)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))};i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(q,{})}),document.getElementById("root")),A()}},[[223,1,2]]]);
//# sourceMappingURL=main.4f137492.chunk.js.map